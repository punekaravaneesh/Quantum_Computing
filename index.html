<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Quantum Computing Portal</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght<:400;600&display=swap" rel="stylesheet">
  <style>
    /* Global Styles */
    body {
      margin: 0;
      font-family: 'Poppins', sans-serif;
      color: white;
      background: radial-gradient(circle at center, #0a0a1a, #000);
      overflow-x: hidden;
      text-align: center;
    }
    h1 { font-size: 2.5em; color: #00fff2; margin-top: 60px; animation: fadeIn 1s ease forwards; }
    h2 { color: #00fff2; border-bottom: 2px solid rgba(0,255,242,0.2); padding-bottom: 10px; margin-top: 20px; }
    h3 { color: #00fff2; margin-top: 30px; }
    p { font-size: 1.1em; color: #bbb; max-width: 800px; margin: 10px auto; animation: fadeIn 1s ease forwards; animation-delay: 0.3s; }
    ul { text-align: left; max-width: 800px; margin: 10px auto; line-height: 1.6; list-style-type: '‚ö°'; padding-left: 20px; }
    li { margin-bottom: 8px; padding-left: 10px; }

    /* Animations */
    @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes ringPulse { 0% { transform: scale(0.9); opacity: 0.7; } 50% { transform: scale(1.1); opacity: 1; } 100% { transform: scale(0.9); opacity: 0.7; } }

    .ring {
      position: fixed; top: 50%; left: 50%;
      width: 500px; height: 500px;
      border: 2px solid #00fff2; border-radius: 50%;
      transform: translate(-50%, -50%);
      animation: ringPulse 6s infinite ease-in-out;
      filter: blur(2px); z-index: -1;
    }

    /* Logo Styles */
    .logo-container img, .logo-container-right img {
      width: 80px; height: auto; border: none; border-radius: 8px;
      box-shadow: 0 0 15px rgba(0, 255, 242, 0.7);
    }
    .logo-container:hover, .logo-container-right:hover { transform: scale(1.05); }
    .logo-container { position: absolute; top: 20px; left: 20px; z-index: 100; transition: transform 0.3s; }
    .logo-container-right { position: absolute; top: 20px; right: 20px; z-index: 100; transition: transform 0.3s; }

    /* Grid Layout */
    #mainGrid {
        display: flex; flex-direction: column; align-items: center;
        gap: 25px; padding: 40px;
        animation: fadeInUp 1s ease forwards; animation-delay: 0.6s;
    }
    .card-row {
        display: flex; flex-wrap: wrap; justify-content: center;
        gap: 25px;
    }
    .card {
      background: rgba(255,255,255,0.05); border: 2px solid rgba(0,255,242,0.3);
      border-radius: 15px; width: 240px; height: 160px;
      display: flex; align-items: center; justify-content: center; text-align: center;
      color: #00fff2; font-weight: 600; text-decoration: none; font-size: 1.1em;
      transition: all 0.4s ease; cursor: pointer;
      box-shadow: 0 0 20px rgba(0,255,242,0.1);
    }
    .card:hover { background: rgba(0,255,242,0.1); box-shadow: 0 0 25px #00fff2, 0 0 40px #00fff2; transform: translateY(-10px); color: #fff; border-color: #00fff2; }

    /* Content Area */
    #content {
      max-width: 950px; margin: 40px auto; background: rgba(255,255,255,0.05);
      padding: 40px; border-radius: 12px; backdrop-filter: blur(6px);
      display: none; animation: fadeIn 0.8s ease; text-align: left;
    }

    /* Buttons and Inputs */
    button {
      background-color: #00fff2; border: none;
      padding: 10px 20px; color: #000; font-weight: bold;
      cursor: pointer; border-radius: 5px; margin: 10px 5px;
      transition: 0.3s;
    }
    button:hover:not([disabled]) { background-color: #ff00ff; color: white; }
    button[disabled] { opacity: 0.5; cursor: not-allowed; }

    input[type="text"] {
        padding: 10px; border-radius: 5px; border: 1px solid #00fff2;
        background: rgba(255,255,255,0.1); color: white; width: 90%;
        margin-bottom: 15px;
    }

    /* LLM Output and Loader */
    .llm-output {
        margin-top: 20px; padding: 15px; border: 1px dashed #00fff2;
        border-radius: 8px; background: rgba(0, 255, 242, 0.1);
        min-height: 50px; color: #fff; text-align: left;
    }
    .loader {
        border: 4px solid rgba(255, 255, 255, 0.3); border-top: 4px solid #00fff2;
        border-radius: 50%; width: 20px; height: 20px;
        animation: spin 1s linear infinite; display: none; margin: 10px auto;
    }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

    /* Footer */
    footer { color: #888; margin: 40px 0 20px; animation: fadeIn 1s ease forwards; animation-delay: 1s; }

    /* Responsive Design */
    @media (max-width: 768px) {
        .card { width: 80%; height: 120px; }
        .card-row { flex-direction: column; } /* Cards stack vertically on mobile */
    }
  </style>
</head>
<body>
  <div class="ring"></div>

  <!-- Logos -->
  <div class="logo-container">
    <a href="https://imgbb.com/">
      <img src="https://i.ibb.co/rRtDKjJ7/logo.jpg" alt="Quantum Logo">
    </a>
  </div>
  <div class="logo-container-right">
    <a href="https://ibb.co/zTP44FK3">
      <img src="https://i.ibb.co/21ckkSXz/quantum-logo.jpg" alt="quantum-logo">
    </a>
  </div>

  <h1> Quantum Computing Portal</h1>
  <p>Click any topic below to explore directly on this page.</p>

  <!-- Content Grid (4 Up, 3 Down) -->
  <div id="mainGrid">
    <div class="card-row">
        <div class="card" onclick="showInfo('computing')">üß† What is Computing</div>
        <div class="card" onclick="showInfo('superposition')">‚öõÔ∏è Superposition</div>
        <div class="card" onclick="showInfo('interference')">üåä Interference</div>
        <div class="card" onclick="showInfo('future')">üîÆ The Future</div>
    </div>
    <div class="card-row">
        <div class="card" onclick="showInfo('summary')">üåü Summary</div>
        <div class="card" onclick="showInfo('quiz')">üß© Quiz</div>
        <div class="card" onclick="showInfo('assistant')">ü§ñ Quantum Assistant</div>
    </div>
  </div>

  <!-- The globalAssistant div is now removed from the main body -->
  
  <div id="content"></div>
  <footer>Created with üíô for Quantum Enthusiasts</footer>

  <script>
    // --- Global Configuration for Gemini API ---
    const apiKey = "AIzaSyAdCvooJXJCzngl-DuGf7a";
    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

    // --- Utility Functions ---
    // Generic fetch wrapper with exponential backoff
    async function exponentialBackoffFetch(url, options, maxRetries = 5) {
        for (let i = 0; i < maxRetries; i++) {
            try {
                const response = await fetch(url, options);
                if (response.ok) {
                    return response;
                }
                if (response.status === 429 && i < maxRetries - 1) {
                    const delay = Math.pow(2, i) * 1000 + Math.random() * 1000;
                    await new Promise(resolve => setTimeout(resolve, delay));
                    // console.warn(`Rate limit hit, retrying in ${delay / 1000}s...`);
                    continue;
                }
                throw new Error(`API call failed with status: ${response.status}`);
            } catch (error) {
                if (i === maxRetries - 1) {
                    console.error("Fetch error after retries:", error);
                    throw error;
                }
                const delay = Math.pow(2, i) * 1000 + Math.random() * 1000;
                await new Promise(resolve => setTimeout(resolve, delay));
                // console.warn(`Fetch failed, retrying in ${delay / 1000}s...`);
            }
        }
    }


    // --- Core Data ---
    const topics = {
      computing: `
        <h2>What is Quantum Computing?¬†</h2>
        <p>Quantum computing is an advanced field of technology that uses the laws of <strong>quantum mechanics</strong> to process information. Unlike classical computers, which use bits (0 or 1), quantum computers use <strong>qubits</strong> that can represent 0, 1, or both at once.</p>
        <p>This property allows them to perform complex calculations that classical systems would take years to complete. Quantum computing explores the subatomic world where particles behave like waves, opening new ways to manipulate data.</p>
        <ul>
          <li><strong>Superposition:</strong> Enables qubits to exist in multiple states simultaneously.</li>
          <li><strong>Entanglement:</strong> Links qubits so that the state of one instantly affects another, even across distances.</li>
          <li><strong>Interference:</strong> Allows amplification of correct outcomes and cancellation of incorrect ones.</li>
        </ul>
        <p>Quantum computing can transform how we simulate molecules, encrypt data, and optimize complex systems.</p>
      `,
      superposition: `
        <h2>Superposition</h2>
        <p><strong>Superposition</strong> is one of the fundamental principles of quantum mechanics. It means that a quantum system (like a qubit) can exist in multiple states simultaneously.</p>
        <p>For example, while a classical bit must be either 0 or 1, a qubit can be both at once until measured. This is similar to a spinning coin that shows both heads and tails in motion.</p>
        <ul>
          <li>Allows quantum computers to explore many possible solutions at the same time.</li>
          <li>Gives quantum systems massive parallel processing capabilities.</li>
          <li>When measured, the system "collapses" to a definite state (0 or 1).</li>
        </ul>
      `,
      interference: `
        <h2>Interference</h2>
        <p>Interference occurs when quantum waves combine, either strengthening (constructive interference) or canceling (destructive interference) each other.</p>
        <p>Quantum computers use this effect to eliminate wrong answers and enhance the right ones. This is crucial because qubits exist in multiple possible states until measured.</p>
        <ul>
          <li><strong>Constructive Interference:</strong> Reinforces the probability of correct outcomes.</li>
          <li><strong>Destructive Interference:</strong> Cancels out incorrect results.</li>
        </ul>
      `,
      future: `
        <h2>The Future of Quantum Computing</h2>
        <p>Quantum computing is still in its early stages, but its potential is vast. Researchers are developing stable, scalable qubits and reducing errors to make quantum computers more practical.</p>
        <ul>
          <li><strong>üîê Cryptography:</strong> Future quantum systems could break traditional encryption, leading to <strong>quantum-safe security</strong>.</li>
          <li><strong>üíä Drug Discovery:</strong> Simulating complex molecules to accelerate medical breakthroughs.</li>
          <li><strong>üöö Optimization:</strong> Solving logistics, supply chain, and financial optimization problems faster than ever.</li>
          <li><strong>ü§ñ Artificial Intelligence:</strong> Speeding up machine learning and data classification.</li>
        </ul>
      `,
      summary: `
        <h2>Summary</h2>
        <p>Quantum computing represents a major leap beyond classical technology. By leveraging quantum properties like <strong>superposition</strong>, <strong>entanglement</strong>, and <strong>interference</strong>, these systems can solve complex problems previously thought impossible.</p>
        <p>Although challenges like error correction and qubit stability remain, global research is advancing rapidly. As quantum computers become more reliable, they could redefine fields such as cybersecurity, materials science, and artificial intelligence.</p>
      `,
      quiz: `
        <h2>Quantum Computing Quiz</h2>
        <div id="quizGeneratorUI">
            <h3>‚ú® Generate a Custom Quiz</h3>
            <input type="text" id="quizTopicInput" placeholder="Enter a quantum topic (e.g., 'Quantum Entanglement')" value="Quantum Entanglement">
            <button onclick="generateNewQuiz()">‚ú® Generate Quiz (5 Qs)</button>
            <div class="loader" id="quizLoader"></div>
        </div>
        <div id="quizContainer"></div>
        <p id="result"></p>
      `,
      assistant: `
        <h2>ü§ñ Quantum Assistant</h2>
        <p>Ask any question about quantum computing below. The assistant uses Google Search grounding to provide accurate, up-to-date explanations.</p>
        <div style="max-width: 90%; margin: 40px auto; padding: 20px; border-radius: 12px; background: rgba(0,255,242,0.05); border: 1px solid rgba(0,255,242,0.2);">
            <input type="text" id="globalConceptQuery" placeholder="Ask any question about quantum computing (e.g., 'What is Shor's algorithm?')">
            <div style="text-align: center;">
                <button id="globalLlmButton" onclick="generateGlobalExplanation()">‚ú® Ask Assistant</button>
            </div>
            <div class="loader" id="globalLlmLoader"></div>
            <div id="globalLlmOutput" class="llm-output">Ask a question above to get an instant explanation.</div>
        </div>
      `
    };

    let quizQuestions = [
      { q: "1. What is a qubit?", options: ["A classical bit", "A particle of light", "A quantum bit that can be 0 and 1 simultaneously", "A type of transistor"], correct: 2 },
      { q: "2. What principle allows qubits to exist in multiple states?", options: ["Entanglement", "Superposition", "Classical logic", "Magnetism"], correct: 1 },
      { q: "3. What does interference do in quantum computing?", options: ["Increases wrong answers", "Amplifies correct results", "Randomizes outputs", "Stores data"], correct: 1 },
      { q: "4. Which company works on quantum computers?", options: ["IBM", "Instagram", "Netflix", "Spotify"], correct: 0 },
      { q: "5. What temperature do quantum computers require?", options: ["Room temperature", "Boiling point", "Near absolute zero", "100¬∞C"], correct: 2 },
      { q: "6. What makes quantum computers powerful?", options: ["They are smaller", "They use electricity", "They use qubits and superposition", "They are cheaper"], correct: 2 },
      { q: "7. What does entanglement mean?", options: ["Two qubits connected regardless of distance", "One qubit split in two", "Qubit vibration", "Error correction"], correct: 0 },
      { q: "8. What field can benefit from quantum computing?", options: ["Cooking", "Chemistry", "Painting", "Farming"], correct: 1 },
      { q: "9. What is the biggest challenge in quantum computing?", options: ["Speed", "Qubit stability", "Internet access", "Programming"], correct: 1 },
      { q: "10. What might quantum computers improve?", options: ["Music quality", "Optimization problems", "Gaming graphics", "Smartphones"], correct: 1 }
    ];

    let score = 0;
    let currentTopic = '';
    let currentQuestion = 0;

    // --- LLM Feature 1: Global Quantum Assistant ---
    async function generateGlobalExplanation() {
        const queryInput = document.getElementById('globalConceptQuery');
        const llmOutput = document.getElementById('globalLlmOutput');
        const loader = document.getElementById('globalLlmLoader');
        const button = document.getElementById('globalLlmButton');

        const userQuery = queryInput.value.trim();
        if (!userQuery) {
            llmOutput.innerHTML = '<p style="color:red;">Please enter a question to get an explanation!</p>';
            return;
        }

        const systemPrompt = `You are an expert Quantum Physics Tutor. Explain the user's query clearly and concisely, focusing on quantum computing concepts. Provide a clear and easy-to-understand answer in simple paragraphs.`;

        llmOutput.innerHTML = '';
        loader.style.display = 'block';
        button.disabled = true;

        const payload = {
            contents: [{ parts: [{ text: userQuery }] }],
            systemInstruction: { parts: [{ text: systemPrompt }] },
            tools: [{ "google_search": {} }],
        };

        try {
            const response = await exponentialBackoffFetch(apiUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            });

            const result = await response.json();
            const text = result.candidates?.[0]?.content?.parts?.[0]?.text || "Sorry, I couldn't generate an explanation right now.";
            
            // Append the friendly message
            const closing = "Thanks for asking! üòä";
            // Replace newlines with closing/opening P tags for proper HTML formatting
            const contentHtml = `<p>${text.replace(/\n/g, '</p><p>')}</p>`;
            // Append the closing message in its own paragraph, styled strong
            const responseHtml = `${contentHtml}<p style="margin-top: 15px;"><strong>${closing}</strong></p>`;
            
            llmOutput.innerHTML = responseHtml;

        } catch (error) {
            llmOutput.innerHTML = '<p style="color:red;">An error occurred while fetching the explanation. Please try again.</p>';
            console.error("Gemini API Error:", error);
        } finally {
            loader.style.display = 'none';
            button.disabled = false;
        }
    }
    
    // --- LLM Feature 2: Dynamic Quiz Generator (Structured JSON) ---
    async function generateNewQuiz() {
        const topicInput = document.getElementById('quizTopicInput');
        const loader = document.getElementById('quizLoader');
        const container = document.getElementById('quizContainer');
        const result = document.getElementById('result');

        const topic = topicInput.value.trim() || "Quantum Computing Fundamentals";
        const userQuery = `Generate 5 multiple-choice questions about the quantum computing topic: ${topic}. Each question must have exactly 4 options and the 'correct' field must be the 0-indexed number (0, 1, 2, or 3) corresponding to the correct option.`;

        container.innerHTML = '';
        result.innerHTML = '';
        loader.style.display = 'block';

        const payload = {
            contents: [{ parts: [{ text: userQuery }] }],
            generationConfig: {
                responseMimeType: "application/json",
                responseSchema: {
                    type: "ARRAY",
                    items: {
                        type: "OBJECT",
                        properties: {
                            "q": { "type": "STRING", "description": "The question text." },
                            "options": {
                                "type": "ARRAY",
                                "items": { "type": "STRING" },
                                "description": "Exactly four answer options."
                            },
                            "correct": { "type": "INTEGER", "description": "The 0-indexed position of the correct option (0, 1, 2, or 3)." }
                        },
                        required: ["q", "options", "correct"]
                    }
                }
            }
        };

        try {
            const response = await exponentialBackoffFetch(apiUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            });

            const resultJson = await response.json();
            const jsonText = resultJson.candidates?.[0]?.content?.parts?.[0]?.text;

            if (jsonText) {
                const newQuestions = JSON.parse(jsonText);
                if (Array.isArray(newQuestions) && newQuestions.length > 0) {
                    quizQuestions = newQuestions.map((q, index) => ({
                        ...q,
                        q: `${index + 1}. ${q.q.replace(/^[0-9]\.\s*/, '')}` // Reformat question numbering
                    }));
                    currentQuestion = 0;
                    score = 0;
                    renderQuiz();
                } else {
                    container.innerHTML = '<p style="color:red;">Generator failed to return a valid quiz structure.</p>';
                }
            } else {
                container.innerHTML = '<p style="color:red;">Sorry, I couldn\'t generate a new quiz right now. Try a different topic!</p>';
            }

        } catch (error) {
            container.innerHTML = '<p style="color:red;">An error occurred while generating the quiz. Check the console for details.</p>';
            console.error("Gemini API Error:", error);
        } finally {
            loader.style.display = 'none';
        }
    }
    
    // --- Portal Logic ---

    function showInfo(topic) {
      document.getElementById("mainGrid").style.display = "none";
      
      const contentDiv = document.getElementById("content");
      contentDiv.style.display = "block";
      currentTopic = topic;

      let topicHTML = topics[topic];
      
      contentDiv.innerHTML = topicHTML + `<br><button onclick="backToPortal()">‚¨ÖÔ∏è Back to Portal</button>`;
      
      if (topic === "quiz" && quizQuestions.length > 0) {
          renderQuiz();
      }
      
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function backToPortal() {
      document.getElementById("content").style.display = "none";
      document.getElementById("mainGrid").style.display = "flex";
      currentQuestion = 0;
      score = 0;
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function renderQuiz() {
      showQuestion(currentQuestion);
    }

    function showQuestion(index) {
      const container = document.getElementById("quizContainer");
      document.getElementById("result").innerHTML = "";

      if (index >= quizQuestions.length) {
         container.innerHTML = `<h3>Quiz Complete!</h3>`;
         document.getElementById("result").innerHTML = `üéâ <strong>Well done!</strong> Final Score: ${score}/${quizQuestions.length}. <button onclick="backToPortal()">Return Home</button>`;
         return;
      }
      
      const q = quizQuestions[index];
      container.innerHTML = "";

      const div = document.createElement("div");
      div.innerHTML = `<p><strong>${q.q}</strong></p>`;
      
      q.options.forEach((opt, idx) => {
        const btn = document.createElement("button");
        btn.textContent = opt;
        btn.onclick = () => selectAnswer(idx);
        div.appendChild(btn);
      });

      container.appendChild(div);

      const nextBtn = document.createElement("button");
      nextBtn.textContent = "Next Question ‚û°Ô∏è";
      nextBtn.disabled = true;
      nextBtn.onclick = () => {
        currentQuestion++;
        showQuestion(currentQuestion);
      };
      container.appendChild(nextBtn);

      function selectAnswer(selectedIdx) {
        const buttons = div.querySelectorAll("button");
        buttons.forEach(b => b.disabled = true);
        if(selectedIdx === q.correct) {
          buttons[selectedIdx].style.backgroundColor = "#00ff88";
          score++;
          document.getElementById("result").innerHTML = '‚úÖ Correct!';
        } else {
          buttons[selectedIdx].style.backgroundColor = "#ff0044";
          buttons[q.correct].style.backgroundColor = "#00ff88";
          document.getElementById("result").innerHTML = '‚ùå Incorrect. The correct answer is highlighted.';
        }
        nextBtn.disabled = false;
      }
    }
  </script>
</body>
</html>

